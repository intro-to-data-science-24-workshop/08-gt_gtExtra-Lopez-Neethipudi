---
title: "Creating Tables with gt and gtExtra"
author: "Elena Ujwal"
date: "`r Sys.Date()`"
output: html_document
---
## R Markdown

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

In this workshop, we will explore how to create tables using the gt package, and the gtExtra package, utilizing the pizzaplace dataset. We will start with a basic table using base R to display pizza information, then enhance our visualization using the gt package to create a more polished and user-friendly table. Finally, we will upgrade our visualization further with the gtExtra package, adding even more features and styles to improve the overall presentation of our pizza menu.


Step 1: Create a Basic Table Using Base R:

Objective: Introduce participants to the fundamental concepts of creating tables in R.

Action: We will start by loading the pizzaplace dataset and displaying a simple table using base R functions. This will help us understand how data is structured and presented in a tabular format without any additional packages.

```{r setup, include=FALSE}
#Install and load gt package
library(gt)
library(dplyr)
#Glimpse of built-in dataset pizzaplace
print(pizzaplace)

# Create a basic table using base R
basic_table <- pizzaplace %>%
  select(name, price, type) %>%  # Selecting relevant columns
  head(10)                       # Displaying first 10 rows

# Print the basic table
print(basic_table)


```

Step 2: Enhance Visualization Using the gt Package:

Objective: Familiarize participants with the gt package and its capabilities for improving table aesthetics.

Action: After establishing a basic understanding of table creation, we will create a more visually appealing table using the gt package. This will include styling features like headers, conditional formatting, and better overall presentation.


```{r pizza}

# Create a polished gt table
gt_table <- pizzaplace %>%
  select(name, price, type) %>%  # Selecting relevant columns in lowercase
  head(10) %>%                    # Displaying first 10 rows
  gt() %>%
  tab_header(
    title = "Pizza Place Menu",
    subtitle = "Top 10 Pizzas"
  ) %>%
  fmt_currency(columns = price, currency = "USD") %>%
  cols_label(
    name = "Pizza Name",
    price = "Price (USD)",
    type = "Pizza Type"
  ) %>%
  tab_options(
    table.font.size = 14,                 # Slightly larger font size
    table.width = pct(100),                # Full width
    table.background.color = "#ffffff",    # White background for clarity
    column_labels.background.color = "#4F8C9B"  # Dark teal for header background
  ) %>%
  tab_style(
    style = list(
      cell_fill(color = "#eaf3f3"),        # Light teal for all rows
      cell_text(weight = "bold")            # Bold text for emphasis
    ),
    locations = cells_body()
  ) %>%
  tab_style(
    style = list(
      cell_fill(color = "#d9f0d3")          # Light green for Veg pizzas
    ),
    locations = cells_body(
      columns = type,
      rows = type == "Veg"  # Color coding based on condition
    )
  ) %>%
  tab_style(
    style = list(
      cell_fill(color = "#ffe6e6")          # Light pink for Non-Veg pizzas
    ),
    locations = cells_body(
      columns = type,
      rows = type == "Non-Veg"  # Color for Non-Veg pizzas
    )
  ) %>%
  tab_style(
    style = list(
      cell_text(color = "#4F8C9B")           # Dark teal text for prices
    ),
    locations = cells_body(columns = price)
  ) %>%
  tab_style(
    style = list(
      cell_text(weight = "bold")             # Bold text for price
    ),
    locations = cells_body(columns = price)
  )

# Print the polished gt table
gt_table

```

Step 3: Upgrade Visualization Further with gtExtra:

Objective: Introduce participants to the gtExtra package and how it builds upon the gt package.

Action: We will enhance our gt table even more by using gtExtra to add advanced features like additional styling and interactive elements.

```{r pressure, echo=FALSE}
#Install package gtExtra

# Create an enhanced gtExtra table based on the existing gt_table
gt_extra_table <- gt_table %>%
  tab_options(
    table.background.color = "#F8F8F8",  # Light grey background for the overall table
    row.striping.include_table_body = TRUE  # Enable row striping for readability
  ) %>%
  tab_style(
    style = list(
      cell_fill(color = "#e9ecef")  # Light grey for alternate row striping
    ),
    locations = cells_body(rows = seq(1, 10, by = 2))  # Apply to odd rows (1, 3, 5,...)
  ) %>%
  tab_style(
    style = list(
      cell_text(color = "black")      # Black text for better contrast
    ),
    locations = cells_body()
  ) %>%
  tab_footnote(
    footnote = "Prices are in USD.",
    locations = cells_title("title")   # Add footnote to the title
  ) %>%
  cols_align(
    align = "center",
    columns = vars(name, price, type)  # Center align columns for aesthetics
  ) %>%
  tab_style(
    style = list(
      cell_fill(color = "#f0f8ff"),  # Light blue for the title and subtitle
      cell_text(weight = "bold")
    ),
    locations = cells_title(groups = "title")  # Style title
  ) %>%
  tab_style(
    style = list(
      cell_fill(color = "#f0f8ff"),  # Light blue for subtitle
      cell_text(weight = "bold")
    ),
    locations = cells_title(groups = "subtitle")  # Style subtitle
  ) %>%
  cols_width(
    name ~ px(150),      # Set specific width for columns
    price ~ px(100),
    type ~ px(120)
  ) %>%
  tab_header(
    title = md("**Pizza Place Menu**"),   # Use markdown for title styling
    subtitle = md("**Top 10 Pizzas**")    # Use markdown for subtitle styling
  )

# Print the enhanced gtExtra table
gt_extra_table

```


